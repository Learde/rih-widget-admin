import{u as _,B as D,a as N,r as R}from"./BaseInput-9pf6eSRP.js";import{N as $,Z as h,G as q,z as x,O as E,M as T,f as m,q as b,j as k,Y as w,o as C,c as L,a as M,b as n,w as u,u as r,F as S,d as v,t as F}from"./index-fKPgX005.js";import{B as I}from"./BaseFormGroup-57tQ-1P9.js";const P={__name:"CategoryAddPage",setup(G){const p=$(),l=h(),f=q(),g=x(),i=E(),t=T({title:""}),a=_({formData:{title:{required:R}}},{formData:t}),c=m(()=>!a.value.formData.title.$error),B=m(()=>a.value.formData.title.$errors),V=function(){a.value.formData.title.$touch()},o=b("pending");return k(()=>{l.addEventListener("ready",async()=>{await a.value.$validate()&&(o.value="loading",await f.addOne({title:t.title,children:[],discounts:[],prices:[]}),o.value="success",setTimeout(()=>{const e={};i.query.backRouteName&&(e.noReset=!0),g.push({name:i.query.backRouteName||"Categories",query:e})},1500))})}),w(()=>{l.clearEventListeners("ready")}),(y,e)=>(C(),L(S,null,[M("div",null,[n(r(I),{"is-error":!c.value},{label:u(()=>[v(" Название категории * ")]),content:u(()=>[n(r(D),{placeholder:"Введите название","is-error":!c.value,modelValue:t.title,"onUpdate:modelValue":e[0]||(e[0]=s=>t.title=s),onInput:V},null,8,["is-error","modelValue"])]),"error-text":u(()=>{var s,d;return[v(F(r(p).validationMessages[(d=(s=B.value)==null?void 0:s.at(0))==null?void 0:d.$validator]),1)]}),_:1},8,["is-error"])]),n(r(N),{state:o.value},null,8,["state"])],64))}};export{P as default};
