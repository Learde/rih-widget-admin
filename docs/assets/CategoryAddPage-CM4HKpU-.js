import{u as R,B as S,a as $,b,r as w}from"./BaseInput-SKxtzVrf.js";import{V as x,a8 as E,M as T,g as _,W as h,S as k,B as v,m as p,l as q,a7 as C,o as L,c as M,a as F,b as r,w as u,u as a,F as I,f,y as U}from"./index-CtEuYAy1.js";import{B as A}from"./BaseFormGroup-CQZnYBTp.js";const z={__name:"CategoryAddPage",setup(G){const V=x(),i=E(),g=T(),B=_(),d=h(),s=k({title:""}),l=v(!1),o=R({formData:{title:{required:w}}},{formData:s}),c=p(()=>!o.value.formData.title.$error),y=p(()=>o.value.formData.title.$errors),N=function(){o.value.formData.title.$touch()},n=v("pending");return q(()=>{i.addEventListener("ready",async()=>{if(!await o.value.$validate()){l.value=!0;return}n.value="loading",await g.addOne({title:s.title,children:[],discounts:[],prices:[]}),n.value="success",setTimeout(()=>{const e={};d.query.backRouteName&&(e.noReset=!0),B.push({name:d.query.backRouteName||"Categories",query:e})},1500)})}),C(()=>{i.clearEventListeners("ready")}),(D,e)=>(L(),M(I,null,[F("div",null,[r(a(A),{"is-error":!c.value},{label:u(()=>[f(" Название категории * ")]),content:u(()=>[r(a(S),{placeholder:"Введите название","is-error":!c.value,modelValue:s.title,"onUpdate:modelValue":e[0]||(e[0]=t=>s.title=t),onInput:N},null,8,["is-error","modelValue"])]),"error-text":u(()=>{var t,m;return[f(U(a(V).validationMessages[(m=(t=y.value)==null?void 0:t.at(0))==null?void 0:m.$validator]),1)]}),_:1},8,["is-error"])]),r(a($),{state:n.value},null,8,["state"]),r(a(b),{modelValue:l.value,"onUpdate:modelValue":e[1]||(e[1]=t=>l.value=t),type:"error"},null,8,["modelValue"])],64))}};export{z as default};
