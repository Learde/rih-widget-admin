import{_ as D,o as s,c as r,a as d,t as A,b as n,u as e,s as R,H as q,z,q as v,x as F,f as _,A as O,F as y,k as S,B as U,w as I,h as j,d as P,R as H,p as T,e as G}from"./index-fKPgX005.js";import{I as J}from"./IconPrice-FHexPgAI.js";import{B as K,I as Q,a as W}from"./BaseSearchInput-R0Mct1dP.js";import{I as X}from"./IconDelete-zZdqq761.js";import{I as Y}from"./IconEdit-9OhDEwaQ.js";import{B as Z}from"./BaseDeleteModal-OXePVnJ1.js";const ee={class:"heading"},te={class:"actions"},ae={__name:"InventoryPriceCard",props:{inventoryPrice:{type:Object,required:!0},isLoading:{type:Boolean,default:!1}},emits:["edit","delete"],setup(o){return(t,i)=>(s(),r("div",{class:R(["inventory-price-card",{loading:o.isLoading}])},[d("span",ee,A(o.inventoryPrice.title),1),d("div",te,[n(e(Y),{class:"edit",onClick:i[0]||(i[0]=p=>t.$emit("edit"))}),n(e(X),{class:"delete",onClick:i[1]||(i[1]=p=>t.$emit("delete"))})])],2))}},x=D(ae,[["__scopeId","data-v-b840af68"]]),$=o=>(T("data-v-ff35f968"),o=o(),G(),o),ne={class:"inventory-prices-page"},se={class:"inventory-prices-list"},oe={key:0,class:"no-inventory-prices mt-small"},re=$(()=>d("span",{class:"no-inventory-prices-text"}," Ничего не найдено ",-1)),ie={key:1,class:"no-inventory-prices"},le=$(()=>d("span",{class:"no-inventory-prices-text"}," Нет добавленных тарифов ",-1)),ce={__name:"InventoryPricesPage",setup(o){const t=q(),i=z(),p=v(12),m=v(1),f=v(""),u=F(f,400),C=_(()=>Math.ceil(t.meta.total/p.value)),E=_(()=>t.isManyLoading||t.listData.length>0),k=_(()=>!u.value||u.value.trim().length===0),w=function(l){m.value=l};let V="";const B=function(){V!==u.value&&(m.value=1),V=u.value,t.fetchMany({search:u.value,perPage:p.value,page:m.value})};O(B);const g=v(!1),h=v(null),L=function(l){g.value=!0,h.value=l},M=async function(){await t.deleteOne(h.value),B()},b=function(l){i.push({name:"EditInventoryPrice",params:{id:l}})};return(l,c)=>(s(),r(y,null,[d("div",ne,[E.value||!k.value?(s(),r(y,{key:0},[n(e(K),{modelValue:f.value,"onUpdate:modelValue":c[0]||(c[0]=a=>f.value=a),class:"search-input"},null,8,["modelValue"]),d("div",se,[e(t).isManyLoading?(s(),r(y,{key:1},S(12,a=>n(e(x),{"inventory-price":{},key:a,"is-loading":""})),64)):(s(!0),r(y,{key:0},S(e(t).listData,a=>(s(),j(e(x),{"inventory-price":a,key:a.id,onDelete:N=>L(a.id),onEdit:N=>b(a.id)},null,8,["inventory-price","onDelete","onEdit"]))),128))]),e(t).listData.length===0&&!k.value?(s(),r("div",oe,[n(e(Q),{class:"no-inventory-prices-icon"}),re])):U("",!0),n(e(W),{class:"paginate","page-count":C.value,"click-handler":w,"model-value":m.value,"prev-text":"<","next-text":">"},null,8,["page-count","model-value"])],64)):(s(),r("div",ie,[n(e(J),{class:"no-inventory-prices-icon"}),le,n(e(H),{class:"add-inventory-price",to:{name:"AddInventoryPrice"}},{default:I(()=>[P(" Добавить тариф ")]),_:1})]))]),n(e(Z),{modelValue:g.value,"onUpdate:modelValue":c[1]||(c[1]=a=>g.value=a),onAccept:M,onClose:c[2]||(c[2]=a=>h.value=null)},{title:I(()=>[P(" Удаление тарифа ")]),description:I(()=>[P(" Вы уверены, что хотите удалить этот тариф? ")]),_:1},8,["modelValue"])],64))}},fe=D(ce,[["__scopeId","data-v-ff35f968"]]);export{fe as default};
