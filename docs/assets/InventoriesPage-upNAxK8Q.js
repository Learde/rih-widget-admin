import{_ as D,o as r,c,a as o,n as N,t as _,b as s,w as y,d as f,u as e,s as A,q as m,x as R,y as q,z as F,f as k,A as O,F as g,k as $,B as U,h as j,R as T,p as G,e as H}from"./index-3bTHsoer.js";import{a as J,I as K}from"./IconInventory-maLpGO2n.js";import{B as Q,I as W,a as X}from"./BaseSearchInput-Dndf4VBn.js";import{I as Y}from"./IconDelete-1f17ZlCc.js";import{B as Z}from"./BaseBadge-318XEtXN.js";import{B as ee}from"./BaseDeleteModal-xQcwZCUG.js";const te={class:"img-wrapper"},ae={class:"content"},ne={class:"article"},se={class:"actions"},oe={__name:"InventoryCard",props:{inventory:{type:Object,required:!0},isLoading:{type:Boolean,default:!1}},emits:["delete","edit"],setup(t){return(v,l)=>{var d;return r(),c("div",{class:A(["card",{loading:t.isLoading}])},[o("div",te,[o("div",{class:"img",style:N({backgroundImage:`url(${t.inventory.avatar})`})},null,4)]),o("div",ae,[o("h4",null,_(t.inventory.title),1),o("span",ne,"Артикул: "+_(t.inventory.article),1),s(e(Z),{class:"badge",color:(d=t.inventory.state)==null?void 0:d.color,size:"sm"},{default:y(()=>{var n;return[f(_((n=t.inventory.state)==null?void 0:n.title),1)]}),_:1},8,["color"])]),o("div",se,[s(e(J),{class:"edit",onClick:l[0]||(l[0]=n=>v.$emit("edit"))}),s(e(Y),{class:"delete",onClick:l[1]||(l[1]=n=>v.$emit("delete"))})])],2)}}},x=D(oe,[["__scopeId","data-v-2fa6efd3"]]),C=t=>(G("data-v-dd765851"),t=t(),H(),t),le={class:"inventories-page"},ie={class:"inventories-list"},re={key:0,class:"no-inventories mt-small"},ce=C(()=>o("span",{class:"no-inventories-text"}," Ничего не найдено ",-1)),de={key:1,class:"no-inventories"},ue=C(()=>o("span",{class:"no-inventories-text"}," Нет добавленного инвентаря на складе ",-1)),ve={__name:"InventoriesPage",setup(t){const v=m(12),l=m(1),d=m(""),n=R(d,400),i=q(),P=F(),w=k(()=>Math.ceil(i.meta.total/v.value)),b=k(()=>i.isManyLoading||i.listData.length>0),B=k(()=>!n.value||n.value.trim().length===0),E=function(p){l.value=p};let S="";const V=function(){S!==n.value&&(l.value=1),S=n.value,i.fetchMany({search:n.value,perPage:v.value,page:l.value})};O(V);const h=m(!1),I=m(null),L=function(p){h.value=!0,I.value=p},M=async function(){await i.deleteOne(I.value),V()};return(p,u)=>(r(),c(g,null,[o("div",le,[b.value||!B.value?(r(),c(g,{key:0},[s(e(Q),{modelValue:d.value,"onUpdate:modelValue":u[0]||(u[0]=a=>d.value=a),class:"search-input"},null,8,["modelValue"]),o("div",ie,[e(i).isManyLoading?(r(),c(g,{key:1},$(12,a=>s(e(x),{inventory:{},key:a,"is-loading":""})),64)):(r(!0),c(g,{key:0},$(e(i).listData,a=>(r(),j(e(x),{inventory:a,key:a.id,onDelete:z=>L(a.id),onEdit:z=>e(P).push({name:"EditInventory",params:{id:a.id}})},null,8,["inventory","onDelete","onEdit"]))),128))]),e(i).listData.length===0&&!B.value?(r(),c("div",re,[s(e(W),{class:"no-inventories-icon"}),ce])):U("",!0),s(e(X),{class:"paginate","page-count":w.value,"click-handler":E,"model-value":l.value,"prev-text":"<","next-text":">"},null,8,["page-count","model-value"])],64)):(r(),c("div",de,[s(e(K),{class:"no-inventories-icon"}),ue,s(e(T),{class:"add-inventory",to:{name:"AddInventory"}},{default:y(()=>[f(" Добавить инвентарь ")]),_:1})]))]),s(e(ee),{modelValue:h.value,"onUpdate:modelValue":u[1]||(u[1]=a=>h.value=a),onAccept:M,onClose:u[2]||(u[2]=a=>I.value=null)},{title:y(()=>[f(" Удаление инвентаря ")]),description:y(()=>[f(" Вы уверены, что хотите удалить этот инвентарь? ")]),_:1},8,["modelValue"])],64))}},Ie=D(ve,[["__scopeId","data-v-dd765851"]]);export{Ie as default};
