import{u as R,B as S,a as $,b,r as q}from"./BaseInput-z2B0Qmxp.js";import{Q as w,a2 as x,J as E,z as T,S as _,N as h,q as v,f as p,j as k,a1 as C,o as L,c as F,a as I,b as r,w as u,u as a,F as M,d as f,t as U}from"./index-3bTHsoer.js";import{B as j}from"./BaseFormGroup-L-5HxBEw.js";const P={__name:"CategoryAddPage",setup(z){const V=w(),i=x(),g=E(),B=T(),d=_(),s=h({title:""}),l=v(!1),o=R({formData:{title:{required:q}}},{formData:s}),c=p(()=>!o.value.formData.title.$error),y=p(()=>o.value.formData.title.$errors),N=function(){o.value.formData.title.$touch()},n=v("pending");return k(()=>{i.addEventListener("ready",async()=>{if(!await o.value.$validate()){l.value=!0;return}n.value="loading",await g.addOne({title:s.title,children:[],discounts:[],prices:[]}),n.value="success",setTimeout(()=>{const e={};d.query.backRouteName&&(e.noReset=!0),B.push({name:d.query.backRouteName||"Categories",query:e})},1500)})}),C(()=>{i.clearEventListeners("ready")}),(D,e)=>(L(),F(M,null,[I("div",null,[r(a(j),{"is-error":!c.value},{label:u(()=>[f(" Название категории * ")]),content:u(()=>[r(a(S),{placeholder:"Введите название","is-error":!c.value,modelValue:s.title,"onUpdate:modelValue":e[0]||(e[0]=t=>s.title=t),onInput:N},null,8,["is-error","modelValue"])]),"error-text":u(()=>{var t,m;return[f(U(a(V).validationMessages[(m=(t=y.value)==null?void 0:t.at(0))==null?void 0:m.$validator]),1)]}),_:1},8,["is-error"])]),r(a($),{state:n.value},null,8,["state"]),r(a(b),{modelValue:l.value,"onUpdate:modelValue":e[1]||(e[1]=t=>l.value=t),type:"error"},null,8,["modelValue"])],64))}};export{P as default};
