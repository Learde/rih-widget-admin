import{u as y,B as D,a as E,r as x}from"./BaseInput-9pf6eSRP.js";import{N,Z as S,$ as T,z as _,M as h,f as v,q as L,j as M,Y as P,o as b,c as F,a as I,b as l,w as u,u as r,F as O,d as f,t as k}from"./index-fKPgX005.js";import{B as q}from"./BaseFormGroup-57tQ-1P9.js";const G={__name:"PointEditPage",props:{id:{type:[String,Number],default:null}},setup(g){const t=g,B=N(),d=S(),i=T(),V=_(),e=h({title:""}),s=y({formData:{title:{required:x}}},{formData:e}),c=v(()=>!s.value.formData.title.$error),$=v(()=>s.value.formData.title.$errors),w=function(){s.value.formData.title.$touch()},a=L("pending");return M(async()=>{if(t.id){a.value="loading";const n=await i.getOne(t.id);a.value="pending",e.title=n.title}d.addEventListener("ready",async()=>{await s.value.$validate()&&(a.value="loading",t.id?await i.editOne(t.id,{id:t.id,title:e.title}):await i.addOne({title:e.title}),a.value="success",setTimeout(()=>{V.push({name:"Points"})},1500))})}),P(()=>{d.clearEventListeners("ready")}),(n,p)=>(b(),F(O,null,[I("div",null,[l(r(q),{"is-error":!c.value},{label:u(()=>[f(" Название пункта проката * ")]),content:u(()=>[l(r(D),{placeholder:"Введите название","is-error":!c.value,modelValue:e.title,"onUpdate:modelValue":p[0]||(p[0]=o=>e.title=o),onInput:w},null,8,["is-error","modelValue"])]),"error-text":u(()=>{var o,m;return[f(k(r(B).validationMessages[(m=(o=$.value)==null?void 0:o.at(0))==null?void 0:m.$validator]),1)]}),_:1},8,["is-error"])]),l(r(E),{state:a.value},null,8,["state"])],64))}};export{G as default};
