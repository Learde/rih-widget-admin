import{_ as $,o as s,c as r,a as d,y as O,b as a,u as e,n as R,O as j,g as A,B as v,C as F,m as h,E as U,F as y,j as S,G as q,w as I,e as z,f as P,R as G,p as T,d as H}from"./index-CtEuYAy1.js";import{I as J}from"./IconPrice-B5ANKND1.js";import{B as K,I as Q,a as W}from"./BaseSearchInput-Dygz8Lnq.js";import{I as X}from"./IconDelete-C-E87YfA.js";import{I as Y}from"./IconEdit-CAi2SBjy.js";import{B as Z}from"./BaseDeleteModal-3N47HtiO.js";const ee={class:"heading"},te={class:"actions"},ne={__name:"InventoryPriceCard",props:{inventoryPrice:{type:Object,required:!0},isLoading:{type:Boolean,default:!1}},emits:["edit","delete"],setup(o){return(t,i)=>(s(),r("div",{class:R(["inventory-price-card",{loading:o.isLoading}])},[d("span",ee,O(o.inventoryPrice.title),1),d("div",te,[a(e(Y),{class:"edit",onClick:i[0]||(i[0]=p=>t.$emit("edit"))}),a(e(X),{class:"delete",onClick:i[1]||(i[1]=p=>t.$emit("delete"))})])],2))}},D=$(ne,[["__scopeId","data-v-b840af68"]]),x=o=>(T("data-v-ff35f968"),o=o(),H(),o),ae={class:"inventory-prices-page"},se={class:"inventory-prices-list"},oe={key:0,class:"no-inventory-prices mt-small"},re=x(()=>d("span",{class:"no-inventory-prices-text"}," Ничего не найдено ",-1)),ie={key:1,class:"no-inventory-prices"},le=x(()=>d("span",{class:"no-inventory-prices-text"}," Нет добавленных тарифов ",-1)),ce={__name:"InventoryPricesPage",setup(o){const t=j(),i=A(),p=v(12),m=v(1),f=v(""),u=F(f,400),C=h(()=>Math.ceil(t.meta.total/p.value)),E=h(()=>t.isManyLoading||t.listData.length>0),k=h(()=>!u.value||u.value.trim().length===0),w=function(l){m.value=l};let V="";const B=function(){V!==u.value&&(m.value=1),V=u.value,t.fetchMany({search:u.value,perPage:p.value,page:m.value})};U(B);const g=v(!1),_=v(null),L=function(l){g.value=!0,_.value=l},M=async function(){await t.deleteOne(_.value),B()},b=function(l){i.push({name:"EditInventoryPrice",params:{id:l}})};return(l,c)=>(s(),r(y,null,[d("div",ae,[E.value||!k.value?(s(),r(y,{key:0},[a(e(K),{modelValue:f.value,"onUpdate:modelValue":c[0]||(c[0]=n=>f.value=n),class:"search-input"},null,8,["modelValue"]),d("div",se,[e(t).isManyLoading?(s(),r(y,{key:1},S(12,n=>a(e(D),{"inventory-price":{},key:n,"is-loading":""})),64)):(s(!0),r(y,{key:0},S(e(t).listData,n=>(s(),z(e(D),{"inventory-price":n,key:n.id,onDelete:N=>L(n.id),onEdit:N=>b(n.id)},null,8,["inventory-price","onDelete","onEdit"]))),128))]),e(t).listData.length===0&&!k.value?(s(),r("div",oe,[a(e(Q),{class:"no-inventory-prices-icon"}),re])):q("",!0),a(e(W),{class:"paginate","page-count":C.value,"click-handler":w,"model-value":m.value,"prev-text":"<","next-text":">"},null,8,["page-count","model-value"])],64)):(s(),r("div",ie,[a(e(J),{class:"no-inventory-prices-icon"}),le,a(e(G),{class:"add-inventory-price",to:{name:"AddInventoryPrice"}},{default:I(()=>[P(" Добавить тариф ")]),_:1})]))]),a(e(Z),{modelValue:g.value,"onUpdate:modelValue":c[1]||(c[1]=n=>g.value=n),onAccept:M,onClose:c[2]||(c[2]=n=>_.value=null)},{title:I(()=>[P(" Удаление тарифа ")]),description:I(()=>[P(" Вы уверены, что хотите удалить этот тариф? ")]),_:1},8,["modelValue"])],64))}},fe=$(ce,[["__scopeId","data-v-ff35f968"]]);export{fe as default};
