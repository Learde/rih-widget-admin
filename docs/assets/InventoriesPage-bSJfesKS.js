import{_ as x,o as r,c,a as o,t as z,x as _,b as s,w as y,f,u as e,n as A,A as m,B as R,C as j,g as F,k,D as O,F as g,j as $,E as U,e as q,R as T,p as G,d as H}from"./index-iYkTLCFw.js";import{a as J,I as K}from"./IconInventory-xJl6Uv8e.js";import{B as Q,I as W,a as X}from"./BaseSearchInput-5eKY6hV1.js";import{I as Y}from"./IconDelete-fPqqRaPc.js";import{B as Z}from"./BaseBadge-8lw2Kxnp.js";import{B as ee}from"./BaseDeleteModal-PZv4fN9l.js";const te={class:"img-wrapper"},ae={class:"content"},ne={class:"article"},se={class:"actions"},oe={__name:"InventoryCard",props:{inventory:{type:Object,required:!0},isLoading:{type:Boolean,default:!1}},emits:["delete","edit"],setup(t){return(v,l)=>{var d;return r(),c("div",{class:A(["card",{loading:t.isLoading}])},[o("div",te,[o("div",{class:"img",style:z({backgroundImage:`url(${t.inventory.avatar})`})},null,4)]),o("div",ae,[o("h4",null,_(t.inventory.title),1),o("span",ne,"Артикул: "+_(t.inventory.article),1),s(e(Z),{class:"badge",color:(d=t.inventory.state)==null?void 0:d.color,size:"sm"},{default:y(()=>{var n;return[f(_((n=t.inventory.state)==null?void 0:n.title),1)]}),_:1},8,["color"])]),o("div",se,[s(e(J),{class:"edit",onClick:l[0]||(l[0]=n=>v.$emit("edit"))}),s(e(Y),{class:"delete",onClick:l[1]||(l[1]=n=>v.$emit("delete"))})])],2)}}},D=x(oe,[["__scopeId","data-v-2fa6efd3"]]),C=t=>(G("data-v-dd765851"),t=t(),H(),t),le={class:"inventories-page"},ie={class:"inventories-list"},re={key:0,class:"no-inventories mt-small"},ce=C(()=>o("span",{class:"no-inventories-text"}," Ничего не найдено ",-1)),de={key:1,class:"no-inventories"},ue=C(()=>o("span",{class:"no-inventories-text"}," Нет добавленного инвентаря на складе ",-1)),ve={__name:"InventoriesPage",setup(t){const v=m(12),l=m(1),d=m(""),n=R(d,400),i=j(),P=F(),w=k(()=>Math.ceil(i.meta.total/v.value)),E=k(()=>i.isManyLoading||i.listData.length>0),B=k(()=>!n.value||n.value.trim().length===0),b=function(p){l.value=p};let S="";const V=function(){S!==n.value&&(l.value=1),S=n.value,i.fetchMany({search:n.value,perPage:v.value,page:l.value})};O(V);const h=m(!1),I=m(null),L=function(p){h.value=!0,I.value=p},M=async function(){await i.deleteOne(I.value),V()};return(p,u)=>(r(),c(g,null,[o("div",le,[E.value||!B.value?(r(),c(g,{key:0},[s(e(Q),{modelValue:d.value,"onUpdate:modelValue":u[0]||(u[0]=a=>d.value=a),class:"search-input"},null,8,["modelValue"]),o("div",ie,[e(i).isManyLoading?(r(),c(g,{key:1},$(12,a=>s(e(D),{inventory:{},key:a,"is-loading":""})),64)):(r(!0),c(g,{key:0},$(e(i).listData,a=>(r(),q(e(D),{inventory:a,key:a.id,onDelete:N=>L(a.id),onEdit:N=>e(P).push({name:"EditInventory",params:{id:a.id}})},null,8,["inventory","onDelete","onEdit"]))),128))]),e(i).listData.length===0&&!B.value?(r(),c("div",re,[s(e(W),{class:"no-inventories-icon"}),ce])):U("",!0),s(e(X),{class:"paginate","page-count":w.value,"click-handler":b,"model-value":l.value,"prev-text":"<","next-text":">"},null,8,["page-count","model-value"])],64)):(r(),c("div",de,[s(e(K),{class:"no-inventories-icon"}),ue,s(e(T),{class:"add-inventory",to:{name:"AddInventory"}},{default:y(()=>[f(" Добавить инвентарь ")]),_:1})]))]),s(e(ee),{modelValue:h.value,"onUpdate:modelValue":u[1]||(u[1]=a=>h.value=a),onAccept:M,onClose:u[2]||(u[2]=a=>I.value=null)},{title:y(()=>[f(" Удаление инвентаря ")]),description:y(()=>[f(" Вы уверены, что хотите удалить этот инвентарь? ")]),_:1},8,["modelValue"])],64))}},Ie=x(ve,[["__scopeId","data-v-dd765851"]]);export{Ie as default};
