import{_ as D,o as r,c,a as o,x as O,y as _,b as s,w as y,f,u as e,n as R,B as m,C as j,D as A,k as F,g as U,m as k,E as q,l as G,F as g,j as $,G as T,e as H,R as J,p as K,d as Q}from"./index-CtEuYAy1.js";import{a as W,I as X}from"./IconInventory-Chssl9I4.js";import{B as Y,I as Z,a as ee}from"./BaseSearchInput-Dygz8Lnq.js";import{I as te}from"./IconDelete-C-E87YfA.js";import{B as ae}from"./BaseBadge-D9zsiUM_.js";import{B as ne}from"./BaseDeleteModal-3N47HtiO.js";const se={class:"img-wrapper"},oe={class:"content"},le={class:"article"},ie={class:"actions"},re={__name:"InventoryCard",props:{inventory:{type:Object,required:!0},isLoading:{type:Boolean,default:!1}},emits:["delete","edit"],setup(t){return(v,l)=>{var d;return r(),c("div",{class:R(["card",{loading:t.isLoading}])},[o("div",se,[o("div",{class:"img",style:O({backgroundImage:`url(${t.inventory.avatar})`})},null,4)]),o("div",oe,[o("h4",null,_(t.inventory.title),1),o("span",le,"Артикул: "+_(t.inventory.article),1),s(e(ae),{class:"badge",color:(d=t.inventory.state)==null?void 0:d.color,size:"sm"},{default:y(()=>{var n;return[f(_((n=t.inventory.state)==null?void 0:n.title),1)]}),_:1},8,["color"])]),o("div",ie,[s(e(W),{class:"edit",onClick:l[0]||(l[0]=n=>v.$emit("edit"))}),s(e(te),{class:"delete",onClick:l[1]||(l[1]=n=>v.$emit("delete"))})])],2)}}},x=D(re,[["__scopeId","data-v-2fa6efd3"]]),C=t=>(K("data-v-22447245"),t=t(),Q(),t),ce={class:"inventories-page"},de={class:"inventories-list"},ue={key:0,class:"no-inventories mt-small"},ve=C(()=>o("span",{class:"no-inventories-text"}," Ничего не найдено ",-1)),me={key:1,class:"no-inventories"},pe=C(()=>o("span",{class:"no-inventories-text"}," Нет добавленного инвентаря на складе ",-1)),ge={__name:"InventoriesPage",setup(t){const v=m(12),l=m(1),d=m(""),n=j(d,400),i=A(),b=F(),P=U(),w=k(()=>Math.ceil(i.meta.total/v.value)),E=k(()=>i.isManyLoading||i.listData.length>0),S=k(()=>!n.value||n.value.trim().length===0),M=function(p){l.value=p};let B="";const V=function(){B!==n.value&&(l.value=1),B=n.value,i.fetchMany({search:n.value,perPage:v.value,page:l.value})};q(V);const h=m(!1),I=m(null),L=function(p){h.value=!0,I.value=p},N=async function(){await i.deleteOne(I.value),V()};return G(()=>{b.moveNext()}),(p,u)=>(r(),c(g,null,[o("div",ce,[E.value||!S.value?(r(),c(g,{key:0},[s(e(Y),{modelValue:d.value,"onUpdate:modelValue":u[0]||(u[0]=a=>d.value=a),class:"search-input"},null,8,["modelValue"]),o("div",de,[e(i).isManyLoading?(r(),c(g,{key:1},$(12,a=>s(e(x),{inventory:{},key:a,"is-loading":""})),64)):(r(!0),c(g,{key:0},$(e(i).listData,a=>(r(),H(e(x),{inventory:a,key:a.id,onDelete:z=>L(a.id),onEdit:z=>e(P).push({name:"EditInventory",params:{id:a.id}})},null,8,["inventory","onDelete","onEdit"]))),128))]),e(i).listData.length===0&&!S.value?(r(),c("div",ue,[s(e(Z),{class:"no-inventories-icon"}),ve])):T("",!0),s(e(ee),{class:"paginate","page-count":w.value,"click-handler":M,"model-value":l.value,"prev-text":"<","next-text":">"},null,8,["page-count","model-value"])],64)):(r(),c("div",me,[s(e(X),{class:"no-inventories-icon"}),pe,s(e(J),{class:"add-inventory",to:{name:"AddInventory"}},{default:y(()=>[f(" Добавить инвентарь ")]),_:1})]))]),s(e(ne),{modelValue:h.value,"onUpdate:modelValue":u[1]||(u[1]=a=>h.value=a),onAccept:N,onClose:u[2]||(u[2]=a=>I.value=null)},{title:y(()=>[f(" Удаление инвентаря ")]),description:y(()=>[f(" Вы уверены, что хотите удалить этот инвентарь? ")]),_:1},8,["modelValue"])],64))}},Se=D(ge,[["__scopeId","data-v-22447245"]]);export{Se as default};
